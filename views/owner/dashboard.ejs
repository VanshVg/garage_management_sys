<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>

<div class="flex w-full h-full" id="dashboard-container">
    <div class="w-4/5">
        <div class="w-full flex flex-wrap h-max">
            <div class="w-1/3" onclick="setActive('garages')">
                <div
                    class="card flex flex-col justify-center items-center cursor-pointer rounded-md px-[20px] py-[25px] mr-3 mb-3 bg-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-[50px] h-[50px] fill-white">
                        <path
                            d="M3 19.723V21a1 1 0 0 0 1 1h1a1 1 0 0 0 1-1v-1h12v1a1 1 0 0 0 1 1h1a1 1 0 0 0 1-1v-1.277A1.99 1.99 0 0 0 22 18v-3c0-.831-.507-1.542-1.228-1.845l-1.368-4.104A2.995 2.995 0 0 0 16.559 7H7.441a2.995 2.995 0 0 0-2.845 2.051l-1.368 4.104A2.001 2.001 0 0 0 2 15v3c0 .738.404 1.376 1 1.723zM5.5 18a1.5 1.5 0 1 1 .001-3.001A1.5 1.5 0 0 1 5.5 18zm13 0a1.5 1.5 0 1 1 .001-3.001A1.5 1.5 0 0 1 18.5 18zM7.441 9h9.117a1 1 0 0 1 .949.684L18.613 13H5.387l1.105-3.316c.137-.409.519-.684.949-.684z">
                        </path>
                        <path
                            d="M22 7.388V5.279l-9.684-3.228a.996.996 0 0 0-.658.009L2 5.572V7.7l10.015-3.642L22 7.388z">
                        </path>
                    </svg>
                    <strong class="count text-white" id="garageCount">368</strong>
                    <p class="text-white font-semibold tracking-wide">Garages</p>
                </div>
            </div>
            <div class="w-1/3">
                <div
                    class="card flex flex-col justify-center items-center cursor-pointer rounded-md px-[20px] py-[25px] mr-3 mb-3 bg-blue">
                    <!-- <object data="/icons/vehicle.svg"></object> -->
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-[50px] h-[50px] fill-white">
                        <path style="fill:var(--card2-text)"
                            d="M12 4a4 4 0 0 1 4 4a4 4 0 0 1-4 4a4 4 0 0 1-4-4a4 4 0 0 1 4-4m0 2a2 2 0 0 0-2 2a2 2 0 0 0 2 2a2 2 0 0 0 2-2a2 2 0 0 0-2-2m0 7c2.67 0 8 1.33 8 4v3H4v-3c0-2.67 5.33-4 8-4m0 1.9c-2.97 0-6.1 1.46-6.1 2.1v1.1h12.2V17c0-.64-3.13-2.1-6.1-2.1" />
                    </svg>
                    <strong class="count text-white" id="customerCount">0</strong>
                    <p class="text-white font-semibold tracking-wide">Customers</p>
                </div>
            </div>
            <div class="w-1/3">
                <div
                    class="card flex flex-col justify-center items-center cursor-pointer rounded-md px-[20px] py-[25px] mr-3 mb-3 bg-dark">
                    <svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 117.48 122.88"
                        class="w-[50px] h-[50px] fill-white">
                        <path
                            d="M76.28,85V81.12l-5.59-2.29L58.85,91.71H55.56L43.72,78.83l-5.59,2.29V112h-4.4v-29l-8.34,3.41v25.62H21V88.11l-6.07,2.48a21.43,21.43,0,0,0-7.55,6.54,17.81,17.81,0,0,0-3,8.85v6H0v-6H0a.61.61,0,0,1,0-.14,22,22,0,0,1,3.72-11A25.85,25.85,0,0,1,12.8,86.9c.1-.06.2-.1.3-.15L41.85,75V66.59q-.43-.37-.84-.78c-4-4-6.71-9.84-7.48-18.72l-1.45-1.48a2.06,2.06,0,0,1-.72-1.55V40.61h4.39v2.61l1.49,1.51a2,2,0,0,1,.6,1.31h0c.59,8.21,2.89,13.47,6.3,16.84S52,67.7,57.06,68.49A20.73,20.73,0,0,0,70,61.67c3.31-3.84,5.3-9.15,5.92-15.65a2,2,0,0,1,.46-1.09h0l1.34-1.65,0-2.82,4.38,0,0,3.38a2.07,2.07,0,0,1-.46,1.45l-1.4,1.73C79.4,54.11,77.1,60,73.34,64.35a22,22,0,0,1-1.77,1.84v8.44l11.48,4.69a23,23,0,0,1,11.18-2.88h0a23.23,23.23,0,0,1,20.15,34.77V112H114A23.22,23.22,0,1,1,76.28,85Zm27.46,3.76a1.38,1.38,0,0,0-2,0l-1.53,1.52a10.65,10.65,0,0,0-1.29-.69c-.45-.2-.92-.38-1.38-.54V86.63a1.4,1.4,0,0,0-1.39-1.39h-3a1.42,1.42,0,0,0-1.4,1.4V88.8a10.14,10.14,0,0,0-1.42.44,10.52,10.52,0,0,0-1.32.61l-1.69-1.67a1.31,1.31,0,0,0-1-.42h0a1.38,1.38,0,0,0-1,.42l-2.08,2.07a1.4,1.4,0,0,0,0,2l1.53,1.53a10.65,10.65,0,0,0-.69,1.29,14.59,14.59,0,0,0-.54,1.38H81.21a1.38,1.38,0,0,0-1.38,1.39v2.94h0a1.39,1.39,0,0,0,.41,1,1.32,1.32,0,0,0,1,.42h2.17A12.78,12.78,0,0,0,84.43,105l-1.67,1.67a1.29,1.29,0,0,0-.42.94v0h0a1.38,1.38,0,0,0,.42,1l2.07,2.07a1.5,1.5,0,0,0,1,.39,1.48,1.48,0,0,0,1-.39l1.52-1.56a8.54,8.54,0,0,0,1.3.69,11.6,11.6,0,0,0,1.38.54v2.35a1.38,1.38,0,0,0,1.38,1.38h2.94a1.38,1.38,0,0,0,1.38-1.38v-2.11a11.62,11.62,0,0,0,1.42-.43c.47-.18.92-.39,1.39-.61l1.66,1.67a1.28,1.28,0,0,0,1,.42h0a1.32,1.32,0,0,0,1-.42l2.07-2.07a1.49,1.49,0,0,0,0-2l-1.55-1.52a10.78,10.78,0,0,0,.69-1.3q.3-.68.54-1.38h2.36a1.39,1.39,0,0,0,1-.41,1.36,1.36,0,0,0,.41-1v-3h0a1.42,1.42,0,0,0-1.39-1.4h-2.16a13.81,13.81,0,0,0-.44-1.38,13.28,13.28,0,0,0-.61-1.33l1.67-1.69a1.29,1.29,0,0,0,.42-1h0a1.4,1.4,0,0,0-.42-1l-2.07-2.07,0,0Zm-4.11,8.85,0,0v.07h0v0a6,6,0,0,1,.35,2,5.79,5.79,0,0,1-.45,2.25,5.74,5.74,0,0,1-5.3,3.51A5.79,5.79,0,0,1,92,105a5.72,5.72,0,0,1-3-2.87l0-.06a5.76,5.76,0,1,1,10.6-4.52ZM47.72,6.18A1.91,1.91,0,0,1,47,6.07c-6.4,2.86-11.57,9.14-13,19.61a2.18,2.18,0,0,1-2.45,1.82,2.12,2.12,0,0,1-1.9-2.34c1.64-12.2,7.9-19.57,15.64-23A26.94,26.94,0,0,1,57.67.05,30.21,30.21,0,0,1,69.78,3.36c7.92,4.11,14,11.78,14.39,22a2.13,2.13,0,0,1-2.1,2.19,2.15,2.15,0,0,1-2.28-2A21.59,21.59,0,0,0,67.7,7.08l-.87-.43a2.2,2.2,0,0,1-.78.12c-2,0-2.51,3.5-2.63,8.29-.06,2.14,0,4.5,0,6.91,0,1.92.08,3.88.08,5.18a2.18,2.18,0,0,1-4.36,0c0-2.12,0-3.63-.06-5.11,0-2.47-.09-4.87,0-7.09.11-4.32.62-8,2.2-10.17a25.21,25.21,0,0,0-3.86-.52,23.89,23.89,0,0,0-4.86.21c1.45,2.25,1.95,5.86,2.06,10.09.05,2.29,0,4.79,0,7.35,0,1.53-.06,3.08-.06,5.24a2.12,2.12,0,0,1-4.24,0c0-1.35,0-3.34.07-5.31,0-2.51.1-5,0-7.17-.11-4.91-.64-8.54-2.67-8.49Zm-1.47,63.4v5.61l11,11.93,10-10.86V69.42a27.56,27.56,0,0,1-9.72,3.27,2.23,2.23,0,0,1-.73,0,32.71,32.71,0,0,1-10.48-3.12ZM29.87,28a8.2,8.2,0,0,0,3.18,3.22c4.87,3,13.44,4.51,22.28,4.54s18-1.43,23.84-4.19a11.55,11.55,0,0,0,4.91-3.77l3.76,2.16a15.59,15.59,0,0,1-6.73,5.38c-6.43,3.05-16.24,4.64-25.79,4.62s-19.06-1.72-24.66-5.22a12.32,12.32,0,0,1-4.78-5l4-1.74ZM54.12,96h5.32v5.12H54.12V96Zm0,10.51h5.32v5.12H54.12V106.5Z" />
                    </svg>
                    <strong class="count text-white" id="staffCount">10</strong>
                    <p class="text-white font-semibold tracking-wide">Staff Members</p>
                </div>
            </div>
            <div class="w-1/3" onclick="setActive('services')">
                <div class=" card flex flex-col justify-center items-center cursor-pointer rounded-md px-[20px]
                py-[25px] mr-3 mb-3 bg-blue">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" class="w-[50px] h-[50px] fill-white">
                        <path fill="var(--card4-text)"
                            d="M27.781 5.738c.293.293.292.801-.003 1.223l-4.504 6.449c-.4.575-1.162.741-1.562.342l-.939-.94l-1.078 1.078l-1.565-1.564l1.078-1.078l-.939-.94c-.4-.4-.234-1.161.341-1.562l6.45-4.504c.421-.294.93-.295 1.223-.002zm-16.237 11.61l3.13 3.13l-7.2 7.2a1.11 1.11 0 0 1-1.566 0l-1.564-1.566a1.109 1.109 0 0 1 0-1.565zm16.112 7.33a1.109 1.109 0 0 1 0 1.564l-1.413 1.414a1.108 1.108 0 0 1-1.566 0L11.181 14.16c-1.607.633-3.491.441-4.926-.574a5.26 5.26 0 0 1-2.15-5.368c.082-.402.593-.543.883-.252l2.039 2.04c.41.41 1.08.41 1.489 0l1.49-1.49c.41-.409.41-1.079 0-1.489L7.97 4.99c-.294-.294-.145-.807.262-.888a5.25 5.25 0 0 1 4.751 1.435a5.26 5.26 0 0 1 1.173 5.641z" />
                    </svg>
                    <strong class="count text-white" id="serviceCount">0</strong>
                    <p class="text-white font-semibold tracking-wide">Services</p>
                </div>
            </div>
            <div class="w-1/3" onclick="setActive('invoice')">
                <div class=" card flex flex-col justify-center items-center cursor-pointer rounded-md px-[20px] py-[25px]
            mr-3 mb-3 bg-dark">
                    <svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 122.88 107.19"
                        class="w-[50px] h-[50px] fill-white">
                        <defs>
                            <style>
                                .cls-1 {
                                    fill-rule: evenodd;
                                }
                            </style>
                        </defs>
                        <title>hand-money</title>
                        <path class="cls-1"
                            d="M25.11,93.69V54.91H42.56c7.43,1.31,14.79,5.31,22.19,10H78.3c6.14.37,9.35,6.59,3.39,10.67-4.75,3.49-11,3.29-17.46,2.72-4.43-.22-4.62,5.72,0,5.75,1.61.13,3.36-.25,4.88-.25,8,0,14.63-1.54,18.67-7.88l2-4.74,20.2-10c10.09-3.32,17.27,7.23,9.83,14.57A263.86,263.86,0,0,1,74.89,102.2c-11.13,6.77-22.26,6.54-33.36,0L25.11,93.69ZM50.61,0l65.12,19.66-9.79,34.18-4.58-.7,7-25,.1-.32a4.47,4.47,0,0,0-3.12-5.48l-2.2-.6,0-.07L92.78,18.93,49.13,5.15,50.61,0ZM39.84,6.9,105,26.55,95.17,60.73,30.05,41.08,39.84,6.9ZM62.53,28.66a8.09,8.09,0,1,1,.34,11.42,8.09,8.09,0,0,1-.34-11.42ZM49.34,15.24,92.43,28.6A5.26,5.26,0,0,0,96,35.09L92.18,48.61a5.25,5.25,0,0,0-6.49,3.61L42.59,38.86A5.26,5.26,0,0,0,39,32.37l3.86-13.52a5.25,5.25,0,0,0,6.5-3.61ZM0,51.22H19.86V97.59H0V51.22Z" />
                    </svg>
                    <strong class="count text-white" id="revenueCount">0</strong>
                    <p class="text-white font-semibold tracking-wide flex">Revenue (<svg
                            xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                            style="fill: rgba(255, 255, 255, 1);">
                            <path
                                d="M17 6V4H6v2h3.5c1.302 0 2.401.838 2.815 2H6v2h6.315A2.994 2.994 0 0 1 9.5 12H6v2.414L11.586 20h2.828l-6-6H9.5a5.007 5.007 0 0 0 4.898-4H17V8h-2.602a4.933 4.933 0 0 0-.924-2H17z">
                            </path>
                        </svg>)</p>
                </div>
            </div>
            <div class="w-1/3">
                <div
                    class="card flex flex-col justify-center items-center cursor-pointer rounded-md px-[20px] py-[25px] mr-3 mb-3 bg-blue">
                    <svg width="800px" height="800px" viewBox="0 -8 72 72" id="Layer_1" data-name="Layer 1"
                        xmlns="http://www.w3.org/2000/svg" class="w-[50px] h-[50px] fill-white">
                        <title>handshake</title>
                        <path class="cls-1"
                            d="M64,12.78v17s-3.63.71-4.38.81-3.08.85-4.78-.78C52.22,27.25,42.93,18,42.93,18a3.54,3.54,0,0,0-4.18-.21c-2.36,1.24-5.87,3.07-7.33,3.78a3.37,3.37,0,0,1-5.06-2.64,3.44,3.44,0,0,1,2.1-3c3.33-2,10.36-6,13.29-7.52,1.78-1,3.06-1,5.51,1C50.27,12,53,14.27,53,14.27a2.75,2.75,0,0,0,2.26.43C58.63,14,64,12.78,64,12.78ZM27,41.5a3,3,0,0,0-3.55-4.09,3.07,3.07,0,0,0-.64-3,3.13,3.13,0,0,0-3-.75,3.07,3.07,0,0,0-.65-3,3.38,3.38,0,0,0-4.72.13c-1.38,1.32-2.27,3.72-1,5.14s2.64.55,3.72.3c-.3,1.07-1.2,2.07-.09,3.47s2.64.55,3.72.3c-.3,1.07-1.16,2.16-.1,3.46s2.84.61,4,.25c-.45,1.15-1.41,2.39-.18,3.79s4.08.75,5.47-.58a3.32,3.32,0,0,0,.3-4.68A3.18,3.18,0,0,0,27,41.5Zm25.35-8.82L41.62,22a3.53,3.53,0,0,0-3.77-.68c-1.5.66-3.43,1.56-4.89,2.24a8.15,8.15,0,0,1-3.29,1.1,5.59,5.59,0,0,1-3-10.34C29,12.73,34.09,10,34.09,10a6.46,6.46,0,0,0-5-2C25.67,8,18.51,12.7,18.51,12.7a5.61,5.61,0,0,1-4.93.13L8,10.89v19.4s1.59.46,3,1a6.33,6.33,0,0,1,1.56-2.47,6.17,6.17,0,0,1,8.48-.06,5.4,5.4,0,0,1,1.34,2.37,5.49,5.49,0,0,1,2.29,1.4A5.4,5.4,0,0,1,26,34.94a5.47,5.47,0,0,1,3.71,4,5.38,5.38,0,0,1,2.39,1.43,5.65,5.65,0,0,1,1.48,4.89,0,0,0,0,1,0,0s.8.9,1.29,1.39a2.46,2.46,0,0,0,3.48-3.48s2,2.48,4.28,1c2-1.4,1.69-3.06.74-4a3.19,3.19,0,0,0,4.77.13,2.45,2.45,0,0,0,.13-3.3s1.33,1.81,4,.12c1.89-1.6,1-3.43,0-4.39Z" />
                    </svg>
                    <strong class="count text-white" id="daysCount">0</strong>
                    <p class="text-white font-semibold tracking-wide">Joined Since (days)</p>
                </div>
            </div>
        </div>
        <div class="w-full h-1/2 pr-3">
            <div class="relative rounded-md h-full w-full bg-white p-4">
                <div class="flex flex-column sm:flex-row flex-wrap items-center justify-between pb-4">
                    <div class="w-max">
                        <span class="font-bold">Upcoming Appointments</span>
                    </div>
                    <label for="table-search" class="sr-only">Search</label>
                    <div class="relative">
                        <div
                            class="absolute inset-y-0 left-0 rtl:inset-r-0 rtl:right-0 flex items-center ps-3 pointer-events-none">
                            <svg class="w-5 h-5 text-gray-500" aria-hidden="true" fill="currentColor"
                                viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd"
                                    d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"
                                    clip-rule="evenodd"></path>
                            </svg>
                        </div>
                        <input type="text" id="table-search"
                            class="block p-2 ps-10 text-sm text-gray-900 border border-gray-300 rounded-lg w-80 bg-gray-50 focus:ring-blue-500 focus:border-blue-500"
                            placeholder="Search for appointments" onkeydown="searchAppointments(event)">
                    </div>
                </div>
                    <table class="w-full text-sm text-left text-gray-500 overflow-y-auto">
                        <thead class="text-xs text-gray-700 uppercase bg-gray-50">
                            <tr>
                                <th scope="col" class="px-1 py-3 bg-dark text-white">
                                    Garage Name
                                </th>
                                <th scope="col" class="px-1 py-3 bg-dark text-white">
                                    Customer Name
                                </th>
                                <th scope="col" class="px-1 py-3 bg-dark text-white">
                                    Date
                                </th>
                                <th scope="col" class="px-1 py-3 bg-dark text-white">
                                    Start Time
                                </th>
                                <th scope="col" class="px-1 py-3 bg-dark text-white">
                                    End Time
                                </th>
                            </tr>
                        </thead>
                        <tbody class="overflow-y-auto bg-dark"  id="dashboard-appointments-body">
                            <tr class="bg-white border-b hover:bg-gray-100">
                            </tr>
                        </tbody>
                    </table>
            </div>

        </div>
    </div>
    <div class="1/5 h-full">
        <div
            class="w-full flex justify-center items-center rounded-lg shadow-sm border-[rgba(255,255,255,.2)] border-2">
            <div class=" bg-white rounded-lg shadow p-4 pb-10">
                <div class="flex justify-between mb-3 w-full">
                    <div class="flex items-center w-full">
                        <div class="flex justify-center items-center">
                            <h5 class="text-xl font-bold leading-none text-dark  pe-1">Appointment States</h5>
                            <div data-popover id="chart-info" role="tooltip"
                                class="absolute z-10 invisible inline-block text-sm text-gray-500 transition-opacity duration-300 bg-white border border-gray-200 rounded-lg shadow-sm opacity-0 w-72">
                                <div data-popper-arrow></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="rounded-lg w-full">
                    <div class="grid  grid-cols-3 gap-3 mb-2 p-2 w-full">
                        <dl class="bg-rose-50 rounded-lg flex flex-col items-center justify-center h-[78px]">
                            <dt class="w-8 h-8 rounded-full bg-rose-100 text-red text-sm font-medium flex items-center justify-center mb-1"
                                id="cancelCount">
                                00</dt>
                            <dd class="text-red text-sm font-medium ml-1 mr-1">Cancelled</dd>
                        </dl>
                        <dl class="bg-orange-50 rounded-lg flex flex-col items-center justify-center h-[78px]">
                            <dt class="w-8 h-8 rounded-full bg-orange-100 text-orange-600 text-sm font-medium flex items-center justify-center mb-1"
                                id="pendingCount">
                                00</dt>
                            <dd class="text-orange-600 text-sm font-medium ml-1 mr-1">Pending</dd>
                        </dl>
                        <dl class="bg-emerald-50 rounded-lg flex flex-col items-center justify-center h-[78px]">
                            <dt class="w-8 h-8 rounded-full bg-emerald-100 text-green text-sm font-medium flex items-center justify-center mb-1"
                                id="successCount">
                                00</dt>
                            <dd class="text-green text-sm font-medium ml-1 mr-1">Completed</dd>
                        </dl>
                    </div>
                </div>

                <!-- Radial Chart -->
                <div class="py-6" id="radial-chart"></div>

            </div>
        </div>
    </div>
</div>

<script>
    const animateNumber = (targetNumber, durationSeconds, elementId) => {
        var startNumber = 0; // Initial number
        var durationMilliseconds = durationSeconds * 100; // Convert seconds to milliseconds
        var increment = Math.ceil((targetNumber - startNumber) / durationMilliseconds); // Calculate increment per millisecond
        var countElement = document.getElementById(elementId);
        var currentNumber = startNumber;

        const animate = () => {
            currentNumber += increment;
            countElement.textContent = currentNumber;
            if (currentNumber < targetNumber) {
                requestAnimationFrame(animate);
            }
        }
        animate();
    }
    const getChartOptions = (successful, pending, cancelled) => {
        const total = successful + pending + cancelled;
        return {
            series: [Math.round(successful * 100 / total), Math.round(pending * 100 / total), Math.round(cancelled * 100 / total)],
            colors: ["#008508", "#f97316", "#cf190c"],
            chart: {
                height: "380px",
                width: "100%",
                type: "radialBar",
                sparkline: {
                    enabled: true,
                },
            },
            plotOptions: {
                radialBar: {
                    track: {
                        background: '#E5E7EB',
                    },
                    dataLabels: {
                        show: false,
                    },
                    hollow: {
                        margin: 0,
                        size: "32%",
                    }
                },
            },
            grid: {
                show: false,
                strokeDashArray: 4,
                padding: {
                    left: 2,
                    right: 2,
                    top: -23,
                    bottom: -20,
                },
            },
            labels: ["Completed", "Pending", "Cancelled"],
            legend: {
                show: true,
                position: "bottom",
                fontFamily: "Inter, sans-serif",
            },
            tooltip: {
                enabled: true,
                x: {
                    show: false,
                },
            },
            yaxis: {
                show: false,
                labels: {
                    formatter: function (value) {
                        return value + '%';
                    }
                }
            }
        }
    }
    const getOwnerData = async () => {
        const garages = await callAPI('/owner/garages/count');
        animateNumber(garages.garageCount || 0, 2, "garageCount");
        const services = await callAPI('/owner/services/count');
        animateNumber(services.serviceCount || 0, 2, "serviceCount");
        const days = await callAPI('/owner/daysCount');
        animateNumber(days.days, 2, "daysCount");
        const appointments = await callAPI('/owner/appointmentCount');
        animateNumber(appointments.successful || 0, 2, "customerCount");
        let successful = appointments.successful;
        animateNumber(successful || 0, 2, 'successCount');
        let pending = appointments.pending;
        animateNumber(pending || 0, 2, 'pendingCount');
        let cancelled = appointments.cancelled;
        animateNumber(cancelled || 0, 2, 'cancelCount');
        animateNumber(10, 20000, "staffCount");
        const revenue = await callAPI('/owner/revenueCount');
        document.getElementById('revenueCount').innerText = revenue.result[0]?.revenue || 0;
        if (document.getElementById("radial-chart") && typeof ApexCharts !== 'undefined') {
            const chart = new ApexCharts(document.querySelector("#radial-chart"), getChartOptions(successful, pending, cancelled));
            chart.render();
        }

        let result = await fetch('/owner/bookedAppointments/' + 1);
        let json = await result.json();
        let table = "";
        json.appointments.forEach(appointment => {
            table += `<tr class="bg-white border-b hover:bg-gray-100">
                            <td class="float-left py-3 px-1">
                                ${appointment.garageName}
                            </td>
                            <td class="text-left py-3 px-1">
                                ${appointment.customerName}
                            </td>
                            <td class="text-left py-3 px-1">
                                ${appointment.date}
                            </td>
                            <td class="text-left py-3 px-1">
                                ${appointment.startTime}
                            </td>
                            <td class="text-left py-3 px-1">
                                ${appointment.endTime}
                            </td>
                        </tr>`;
        });
        let appointmentsBody = document.getElementById('dashboard-appointments-body');
        if (table == "") {
            appointmentsBody.innerHTML = `<tr class="bg-white">
    <td colspan="5">
    <div class="w-full h-[20vh] flex justify-center items-center flex-col">
        <svg class="fill-[#ef4444]" width="100px" height="100px" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M520.741 163.801a10.234 10.234 0 00-3.406-3.406c-4.827-2.946-11.129-1.421-14.075 3.406L80.258 856.874a10.236 10.236 0 00-1.499 5.335c0 5.655 4.585 10.24 10.24 10.24h846.004c1.882 0 3.728-.519 5.335-1.499 4.827-2.946 6.352-9.248 3.406-14.075L520.742 163.802zm43.703-26.674L987.446 830.2c17.678 28.964 8.528 66.774-20.436 84.452a61.445 61.445 0 01-32.008 8.996H88.998c-33.932 0-61.44-27.508-61.44-61.44a61.445 61.445 0 018.996-32.008l423.002-693.073c17.678-28.964 55.488-38.113 84.452-20.436a61.438 61.438 0 0120.436 20.436zM512 778.24c22.622 0 40.96-18.338 40.96-40.96s-18.338-40.96-40.96-40.96-40.96 18.338-40.96 40.96 18.338 40.96 40.96 40.96zm0-440.32c-22.622 0-40.96 18.338-40.96 40.96v225.28c0 22.622 18.338 40.96 40.96 40.96s40.96-18.338 40.96-40.96V378.88c0-22.622-18.338-40.96-40.96-40.96z"/></svg>
        <h2 class="text-[#ef4444] font-bold text-2xl">Oops..!!</h2><p class="text-[#ef4444]"><b>No upcoming Appointments...!!!</b></p>
  </div></td></tr>`;
        }
        else appointmentsBody.innerHTML = table;
    };
    const searchAppointments = (e) => {
        let search = e.target.value;
        search = search.toUpperCase().trim();
        let body = document.getElementById('dashboard-appointments-body');
        let rows = body.getElementsByTagName('tr');
        for (row of rows) {
            let cells = row.getElementsByTagName('td');
            let flag = false;
            for (cell of cells) {
                let text = cell.innerText || cell.textContent;
                text = text.toUpperCase().trim();
                if (text.search(search) != -1) {
                    flag = true;
                    break;
                }
            }
            if (flag == true) row.style.display = '';
            else row.style.display = 'none';
        }
    }
</script>